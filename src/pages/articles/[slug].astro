---
import ArticleView from "../../components/ArticleView.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getAllArticles, slugify } from "../../components/utils";
import "../../styles/markdown.css";

const { post } = Astro.props;
const { Content, frontmatter } = post;

export async function getStaticPaths() {
    const posts = await Astro.glob("/data/articles/**/*.mdx");
    const { articles } = getAllArticles(posts);
    const params = articles.map((onePost) => ({
        params: { slug: slugify(onePost.url) },
        props: { post: onePost },
    }));
    return params;
}
---

<BaseLayout title={frontmatter.title}>
    <ArticleView data={frontmatter}>
        <Content />
    </ArticleView>
</BaseLayout>
