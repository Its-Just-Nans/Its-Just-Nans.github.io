---
import ArticleView from "../../components/ArticleView.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import "../../styles/markdown.css";

const { post } = Astro.props;
const { Content } = post;

export async function getStaticPaths() {
    const posts = await Astro.glob("/data/articles/**/*.mdx");
    const nonDraftPosts = posts.filter((post) => !post.frontmatter.draft);
    const params = nonDraftPosts.map((onePost) => ({
        params: { slug: onePost.url?.split("/")?.pop()?.split(".").shift() },
        props: { post: onePost },
    }));
    return params;
}
---

<BaseLayout title={post.frontmatter.title}>
    <ArticleView data={post.frontmatter}>
        <Content />
    </ArticleView>
</BaseLayout>
